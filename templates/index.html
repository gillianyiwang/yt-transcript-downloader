<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Transcript Downloader</title>
    <link rel="icon" href="/images/icon.png" type="image/png">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <!-- Outer shell: centers everything -->
    <div class="app-shell">
        <!-- Inner wrapper: same width for header + card -->
        <div class="app-inner">
            <!-- Header with icon + centered title -->
            <div class="header-row">
                <img src="/images/icon.png" alt="Icon" class="header-icon">
                <div class="header-text">
                    <h1 class="header-title">YouTube Transcript Downloader</h1>
                    <p class="header-subtitle">Extract, trim, and export YouTube transcripts with ease.</p>
                </div>
            </div>

            <!-- Main card -->
            <div class="main-card">
                <!-- URL + fetch row -->
                <label class="section-label">1. Paste a YouTube URL</label>

                <input type="text"
                       id="url-input"
                       class="url-input"
                       placeholder="https://www.youtube.com/watch?v=...">

                <div class="fetch-section">
                    <!-- First row: fetch button + progress bar -->
                    <div class="fetch-row">
                        <button id="fetch-button" class="btn btn-primary">
                            <span class="material-symbols-outlined">download</span>
                            Fetch transcript
                        </button>

                        <!-- Progress bar -->
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                                <span id="progress-label" class="progress-label">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Second row: status text -->
                    <div id="fetch-status" class="status-text"></div>
                </div>

                <!-- Video info (title + thumbnail), shown after successful fetch -->
                <div id="video-info-row" class="video-info-row" style="display: none;">
                    <img id="thumbnail-image" src="" alt="Video thumbnail" class="video-thumbnail">
                    <a id="video-title-label" href="#" target="_blank" class="video-title"></a>
                </div>

                <div class="separator"></div>

                <!-- OPTIONS UI -->
                <label class="section-label">2. Configure transcript options</label>

                <details class="expansion-panel" open>
                    <summary class="expansion-header">
                        <span class="material-symbols-outlined">settings</span>
                        Time range, formatting, and metadata
                    </summary>

                    <div class="expansion-content">
                        <!-- Start/End time row -->
                        <div class="time-row">
                            <!-- START -->
                            <div class="time-group">
                                <label class="time-label">Start time</label>
                                <div class="time-input-wrapper">
                                    <input type="text" id="start-input" class="time-input" placeholder="e.g. 0:30">
                                    <div class="time-arrows">
                                        <button class="arrow-btn" onclick="adjustStart(5)">
                                            <span class="material-symbols-outlined">arrow_drop_up</span>
                                        </button>
                                        <button class="arrow-btn" onclick="adjustStart(-5)">
                                            <span class="material-symbols-outlined">arrow_drop_down</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- END -->
                            <div class="time-group">
                                <label class="time-label">End time</label>
                                <div class="time-input-wrapper">
                                    <input type="text" id="end-input" class="time-input" placeholder="e.g. 12:57">
                                    <div class="time-arrows">
                                        <button class="arrow-btn" onclick="adjustEnd(5)">
                                            <span class="material-symbols-outlined">arrow_drop_up</span>
                                        </button>
                                        <button class="arrow-btn" onclick="adjustEnd(-5)">
                                            <span class="material-symbols-outlined">arrow_drop_down</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Error + hint -->
                        <div id="range-error" class="error-text"></div>
                        <div id="range-hint" class="hint-text">After fetching a video, defaults are 0 to full length.</div>

                        <!-- Display mode + include options -->
                        <div class="options-row">
                            <select id="display-mode" class="select-field">
                                <option value="ts_before">Timestamp before text (same line)</option>
                                <option value="ts_newline">Timestamp on its own line</option>
                                <option value="ts_after">Timestamp after text (same line)</option>
                                <option value="no_ts_lines">No timestamp, keep line breaks</option>
                                <option value="no_ts_block">No timestamp, single block of text</option>
                            </select>

                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="include-title" checked>
                                    Include YouTube title in output
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="include-description">
                                    Include YouTube description in output
                                </label>
                            </div>
                        </div>

                        <!-- Transcript language selector -->
                        <select id="transcript-language" class="select-field language-select">
                            <option value="">Select language...</option>
                        </select>

                        <!-- File title input -->
                        <input type="text"
                               id="file-title"
                               class="text-field"
                               placeholder="Output file base name"
                               value="transcript">
                    </div>
                </details>

                <!-- "Apply options" button -->
                <div class="apply-button-row">
                    <button id="apply-button" class="btn btn-primary">
                        <span class="material-symbols-outlined">tune</span>
                        Apply options
                    </button>
                </div>

                <div class="separator"></div>

                <!-- COUNTS -->
                <div class="counts-header-row">
                    <label class="section-label">3. Review and edit transcript</label>
                    <span id="counts-label" class="counts-text">Words: 0 | Characters: 0 | Est. size: 0 B</span>
                </div>

                <label class="hint-text">Transcript preview (editable)</label>

                <textarea id="preview-area" class="preview-textarea" rows="10"></textarea>

                <div class="separator"></div>

                <label class="section-label">4. Copy or export</label>

                <div class="export-row">
                    <button id="copy-button" class="btn btn-outline">
                        <span class="material-symbols-outlined">content_copy</span>
                        Copy to clipboard
                    </button>
                    <button class="btn btn-primary" onclick="exportFile('txt')">
                        <span class="material-symbols-outlined">description</span>
                        Download TXT
                    </button>
                    <button class="btn btn-primary" onclick="exportFile('csv')">
                        <span class="material-symbols-outlined">table_chart</span>
                        Download CSV
                    </button>
                    <button class="btn btn-primary" onclick="exportFile('docx')">
                        <span class="material-symbols-outlined">article</span>
                        Download DOCX
                    </button>
                    <button class="btn btn-primary" onclick="exportFile('pdf')">
                        <span class="material-symbols-outlined">picture_as_pdf</span>
                        Download PDF
                    </button>
                </div>

                <!-- Export notes -->
                <details class="expansion-panel">
                    <summary class="expansion-header">
                        <span class="material-symbols-outlined">info</span>
                        Export notes and usage
                    </summary>
                    <div class="expansion-content notes-content">
                        <p>• For videos with multiple transcript languages, you can select the desired language from the dropdown before applying options. However, for the Youtube title and description, only the default interface language is available.</p>
                        <p>• TXT, DOCX, and CSV exports support all transcript languages that YouTube makes available for the video.</p>
                        <p>• PDF export uses FPDF's built-in Helvetica font and supports Latin characters only. For CJK (Chinese, Japanese, Korean) and other scripts, use TXT, DOCX, or CSV export instead.</p>
                        <div class="separator-small"></div>
                        <p class="disclaimer">This tool is intended for personal use. Please respect YouTube's Terms of Service and copyright. Only download or use transcripts for videos you are allowed to use. This project is not affiliated with or endorsed by YouTube or Google. Transcript availability depends on YouTube and may vary by video.</p>
                    </div>
                </details>

                <div id="action-status" class="status-text"></div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
